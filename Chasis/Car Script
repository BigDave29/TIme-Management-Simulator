-- Car settings
local MAX_SPEED = 50 -- Maximum motor speed
local MAX_STEER = 30 -- Maximum steering angle

-- References to car parts
local car = script.Parent
local driveSeat = car.DriveSeat

local leftMotor = car.LeftMotor
local rightMotor = car.RightMotor

local leftServo = car.LeftServo
local rightServo = car.RightServo

-- Listen for when the seat's properties change (Throttle / Steer)
driveSeat.Changed:Connect(function(property)
	-- Forward / backward movement
	if property == "ThrottleFloat" then
		leftMotor.AngularVelocity = MAX_SPEED * driveSeat.ThrottleFloat
		rightMotor.AngularVelocity = MAX_SPEED * driveSeat.ThrottleFloat

		-- Steering left / right
	elseif property == "SteerFloat" then
		leftServo.TargetAngle = MAX_STEER * driveSeat.SteerFloat
		rightServo.TargetAngle = MAX_STEER * driveSeat.SteerFloat
	end
	
	driveSeat.EngineSound.PlaybackSpeed = math.clamp(driveSeat.AssemblyLinearVelocity.Magnitude/25, 0.5, 5)
end)
